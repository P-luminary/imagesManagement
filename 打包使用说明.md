# 图片管理系统 - 打包和使用说明

## 📦 打包成 EXE 可执行文件

### 方法一：使用打包脚本（推荐）

1. 确保已安装 Python 3.7+
2. 双击运行 `build_exe.bat`
3. 等待打包完成（首次需要下载依赖，可能需要几分钟）
4. 打包完成后，在 `dist` 文件夹中找到 `图片管理系统.exe`

### 方法二：手动打包

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 打包
pyinstaller --name="图片管理系统" --onefile --windowed imageApplication.py

# 3. 复制数据文件到 dist 目录
copy files dist\files
copy images.db dist\
```

## 🚀 使用可执行文件

### 首次使用

1. 将 `dist\图片管理系统.exe` 复制到任意目录（例如：`D:\图片管理\`）
2. 双击运行 `图片管理系统.exe`
3. 程序会自动在同目录下创建：
   - `files\` 文件夹（存储导入的图片）
   - `images.db` 数据库文件（存储标签和索引）

### 迁移到其他电脑

将以下三项一起复制到新电脑即可：

```
📁 你的目录/
  ├── 图片管理系统.exe    ← 可执行文件
  ├── files/              ← 图片文件夹
  └── images.db           ← 数据库文件
```

**注意：三者必须在同一目录下！**

## 📂 目录结构说明

```
项目根目录/
├── imageApplication.py      # 主程序源码
├── requirements.txt         # Python 依赖
├── build_exe.bat           # 打包脚本（Windows）
├── 打包使用说明.md          # 本文档
├── files/                  # 图片存储目录
├── images.db               # SQLite 数据库
└── dist/                   # 打包输出目录
    ├── 图片管理系统.exe
    ├── files/
    └── images.db
```

## 🔧 常见问题

### Q1: 打包失败提示缺少模块？
**A:** 运行 `pip install -r requirements.txt` 确保所有依赖已安装

### Q2: 双击 exe 没反应？
**A:** 
- 检查是否有杀毒软件拦截
- 尝试右键"以管理员身份运行"
- 查看同目录是否有错误日志文件

### Q3: 换电脑后无法打开图片？
**A:** 确保以下三项在同一目录：
- `图片管理系统.exe`
- `files` 文件夹（包含所有图片）
- `images.db` 数据库文件

### Q4: 如何更新程序？
**A:** 
1. 重新打包生成新的 exe
2. 用新 exe 替换旧 exe
3. **保留** `files` 和 `images.db`（包含你的数据）

## 💡 技术说明

- **路径处理**: 程序会自动识别是开发环境还是打包环境，使用正确的路径
- **数据库**: 使用相对路径存储图片路径，支持跨电脑使用
- **打包工具**: PyInstaller (单文件模式)
- **GUI 框架**: Tkinter (Python 内置，无需额外安装)

## 📝 更新日志

### v1.0
- ✅ 支持打包成独立 exe
- ✅ 自动识别运行环境
- ✅ 支持跨电脑迁移
- ✅ 优化弹窗样式和交互
- ✅ 动态响应式缩略图布局
- ✅ 手风琴式标签面板

